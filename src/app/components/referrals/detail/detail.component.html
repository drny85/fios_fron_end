<div class="container">

  <h3 class="center z-depth-3">Referral Details</h3>
  <h4 *ngIf="error" class="center red z-depth-3">{{ error.msg }}</h4>
  <div [ngClass]="{'red accent-2': referral.status === 'not sold'}" *ngIf="referral" class="card animated fadeInDown">
    <div class="card-title">
      <div class="row">
        <div class="col s12 l7">
          <h3 class="capitalized ml-8">
            {{ referral.name }} {{ referral.last_name }}
          </h3>
        </div>
        <div class="col s12 l5 center">
          <div class="mt-8">
            <a class="btn grey" routerLink="/referral/edit/{{  referral._id }}"><i class="material-icons left">edit</i>
              EDIT</a>
            <button id="data" (click)="confirmDelete(referral._id)" class="btn modal-trigger red" data-target="#modal1"><i
                class="material-icons left">delete</i>
              DELETE</button>
          </div>

        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s12 l7 z-depth-4">

        <ul class="collection with-header">
          <div *ngIf="referral.status === 'closed'">
            <li class="collection-item upper"><b class="mr-3 ">MON:</b>
              {{ referral.mon }}
            </li>
            <li class="collection-item"><b>Order Date:</b>
              {{ referral.order_date | date: 'mediumDate'}}
            </li>
            <li class="collection-item"><b>Due Date:</b>
              {{ referral.due_date | date: 'mediumDate'}}
            </li>
            <li class="collection-item"><b>Package:</b>
              {{ referral.package }}
            </li>

          </div>
          <li class="collection-item capitalized"><b class="mr-3">Address: </b>
            {{ referral.address}}
          </li>
          <li class="collection-item upper"><b>Apt:</b>
            {{ referral.apt}}
          </li>
          <li class="collection-item"><b>City:</b>
            {{ referral.city }}
          </li>
          <li class="collection-item"><b>Zip code:</b>
            {{ referral.zipcode }}
          </li>
          <li class="collection-item"><b>Phone:</b>
            {{ referral.phone}}
          </li>
          <li class="collection-item"><b>Email:</b>
            <span><a class="blue-text" href="mailto:{{referral.email}}">
                {{ referral.email}} </a></span>
            <button [disabled]="referral.collateral_sent" (click)="sendCollateral(referral.email)" class="btn black btn-right">Send Collateral</button>
          </li>
          <li class="collection-item"><b>Move In:</b>
            {{ referral.moveIn | date: 'mediumDate' }}
          </li>
          <li class="collection-item capitalized"><b>Referred By:</b>
            <a class="black-text" routerLink="/referee/details/{{ referral.referralBy._id }}">
              {{ referral.referralBy.name }} {{ referral.referralBy.last_name }}
            </a>
          </li>
          <li class="collection-item"><b>Status:</b>
            <span class="upper">
              {{ referral.status }}</span>
          </li>
          <li class="collection-item"><b>Collateral Sent:</b>
            <span class="capitalized">
              {{ referral.collateral_sent }}</span><span style="padding-left:10px;" class="text-italic" *ngIf="referral.collateral_sent">{{referral.collateral_sent_on | date: 'medium'}}</span>
          </li>
          <li *ngIf="referral.updatedBy" class="collection-item"><b>Updated By:</b>
            <span class="capitalized">
              {{ referral.updatedBy.name}} {{ referral.updatedBy.last_name}} </span><span class="text-italic"> on {{
              referral.updated }}</span>
          </li>
        </ul>

      </div>
      <div class="col s12 l5">
        <ul class="collection with-header z-depth-3">
          <li class="collection-header grey ligthen-3">
            <h6 class="center bolded">Note or Comments</h6>
          </li>
          <li class="collection-item italiced capitalized">
            {{ referral.comment }}
          </li>
        </ul>

      </div>
    </div>
  </div>

  <div *ngIf="!referral" class="z-depth-3">
    <h3 class="center">No Data</h3>
  </div>


</div>
